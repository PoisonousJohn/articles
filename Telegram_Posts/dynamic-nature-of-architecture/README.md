# Архитектура и командная работа

Разрабатывая архитектуру под конкретную задачу, мы, обычно, выкладываемся по полной. Стараемся все предусмотреть и решить заранее.

Но, на практике, такой подход работает редко. Все дело в том, что архитектура никогда не бывает статичной.

Бизнес требования меняются постоянно, часто -- совсем кардинально. Это требует адаптации существующей архитектуры, а то и, вовсе, тотального рефакторинга.

Прессинг со стороны менеджмента заставляет закрывать глаза на проблемы и "заняться делом". Это понятно, если сразу бросаться все переделывать -- далеко не уедешь. Но есть и другая сторона проблемы.

Если многие механики игры завязаны на одну и ту же архитектуру/модули, то все больше и больше задач затрагивают общий код. Каждый пытается подогнать архитектуру под себя минорными изменениями, и, в конце концов, получается эдакий франкенштейн, который никому не нравится, и никто не хочет им заниматься. Все его прогоняют от себя, и связываются с ним только когда очень надо, и то, осторожно тыкая его палками.

В таком случае, каждая проблема, на которую закрыли глаза, аукается многократно, но не сразу.

Все любят говорить, что архитектура должна быть "гибкой" (ой как все мы любим слово "agile"), подразумевая под этим, что она должна легко адаптироваться под любые задачи. Но люди редко учитывают, что с первой попытки такую архитектуру построить практически невозможно. А это значит, что архитектура должна постоянно меняться, улучшаться, адаптироваться.

Соль в том, что в проектировании архитектуры должна участвовать **вся** команда.

## Взгляд снизу

Что обычно делает **рядовой** разработчик, когда натыкается на проблемное место? Он либо ищет простейший способ сделать свою задачу, например, сделав быстрый фикс на соплях. Либо же он совершенно не хочет вникать в подробности, и изобретает свой новый велосипед, который еще хуже существующего. У обоих вариантов общий корень зла -- безразличность.

Оба варианта только добавляют еще больше технического долга, более того, если нет практики код-ревью, то он еще останется и незамеченным.

Разработчики поопытнее и постарше, как правило, вникают гораздо глубже. Они могут докопаться до корня проблемы, и применяют фиксы более продуманно и аккуратно. Но, **обычно, не принимают каких-либо глобальных мер по исправлению ситуации**.

Если разработчик не безразличен, и понимает, что это влияет на всех, в том числе и на него, то он попытается донести результаты своих исследований до коллег, а потом и наверх. Но, если не будет услышан, то может просто забить и смириться. Многие считают, что это не их обязанность заниматься такими вещами. Как говорится, "проблема не на нашей стороне".

Такой подход немного лучше, но все равно, со временем, закопает проект еще глубже.

Воистину заинтересованные разработчики могут в корне изменить ситуацию, наладив коммуникацию внутри команды и организовать согласованную работу по доработке архитектуры. Но, чтобы это имело достаточно большой размах, нужны определенные полномочия. Такие разработчики идеальные кандидаты в тим лиды.

Как видно из описанного выше, общение в команде -- одна из ключевых вещей. Что нужно для разработки "гибкой" архитектуры? Общаться и услышать мнение каждого. Ведь для каждого разработчика эта "гибкость" может выражаться по разному.

Человек, который разрабатывает архитектуру может не учитывать какого-то аспекта, очевидного для другого. Разные люди по-разному подходят к решению задачи, поэтому иметь на руках несколько точек зрения -- всегда полезно.

## Взгляд сверху

Как выглядит ситуация со стороны менеджмента?

Они планируют определенную загрузку на релиз. В течение нескольких релизов команда работает с определенным темпом. В какой-то момент, темп команды начинает значительно замедляться.

В глазах менеджмента это выглядит как какая-то халтура. Может разработчики тратят время на что-то еще? Может они в соц. сетях зависают? Надо на них надавить, чтобы они работали быстрее.

Разработчики же в это время загибаются от нагрузки. Менеджмент вместо того, чтобы выяснить реальную причину замедления темпа, прислушаться к команде (плакатам и транспорантам "Нам нужен рефакторинг!"), просто накидывают еще задач, и постоянно давят.

Тим лид в этой ситуации должен выступать медиатором, и блюсти интересны как менеджмента, так и разработчиков. Проблема многих команд -- отсутствие нормальной коммуникации. Тим лид должен брать на себя обязанности по общению с менеджментом и разрешению общих проблем проекта.

Чтобы все было хорошо, менеджмент должен доверять тим лиду, либо при его отсутствии, прислушиваться к общему мнению коллектива разработчиков.

## Выводы

Про то, [как анализировать здоровье проекта и как его лечить с технической стороны](https://medium.com/gamedev-architecture/%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7-%D0%B7%D0%B4%D0%BE%D1%80%D0%BE%D0%B2%D1%8C%D1%8F-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0-29896c6c3ade), я уже писал в отдельной статье. В этой статье я хотел показать, что жизнь и архитектура проекта -- это не только технические аспекты, но и командные.

Чтобы у проекта все было хорошо, над архитектурой нужно постоянно работать, улучшать, адаптировать. Чтобы этот процесс происходил эффективно, должно быть налажено общение и культура донесения конструктивной критики.